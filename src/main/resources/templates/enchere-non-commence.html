<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Modifier vente</title>
</head>
<body>

<header th:replace="~{fragments/fragment-entete :: entete}"> </header>

<form th:action="@{/enchere-non-commence/modifier}" method="post" th:object="${article}" enctype="multipart/form-data">
  <input type="hidden" th:field="*{id}" />
  <h2>Nouvelle Vente</h2>

  <ul class="flex-outer">

    <li>
      <label for="inputNom">Article :</label>
      <input type="text" id="inputNom" th:field="*{nom}">
    </li>

    <li>
      <label for="idCategorie">Catégorie :</label>
      <select th:field="*{categorie}" id="idCategorie">
        <option th:each="c : ${categories}" th:text="${c.libelle}" th:value="${c.id}"></option>
      </select>
    </li>

    <li>
      <label for="taDescription">Description :</label>
      <textarea id="taDescription" rows="3" th:field="*{description}"></textarea>
    </li>

    <li>
      <label for="inputImage">Photo de l'article :</label>
      <input type="file" id="inputImage" name="fichierImage" />
      <img th:src="@{'/images/' + *{cheminImg} + '.jpg'}" alt="Photo de l'article" />
    </li>

    <li>
      <label for="inputMiseAPrix">Prix initial :</label>
      <input type="number" id="inputMiseAPrix" th:field="*{miseAPrix}" />
    </li>

    <li>
      <label for="inputdateDebutEnchere">Début de l'enchère</label>
      <input type="datetime-local" id="inputdateDebutEnchere" th:field="*{dateDebutEnchere}">
    </li>

    <li>
      <label for="inputdateFinEnchere">Fin de l'enchère</label>
      <input type="datetime-local" id="inputdateFinEnchere" th:field="*{dateFinEnchere}">
    </li>

    <div>
      <h2>Adresse de retrait</h2>

      <li>
        <label for="inputRue">Rue :</label>
        <input type="text" id="inputRue" th:field="*{lieuRetrait.rue}" />
      </li>

      <li>
        <label for="inputCodePostal">Code postal :</label>
        <input type="text" id="inputCodePostal" th:field="*{lieuRetrait.codePostal}" />
      </li>

      <li>
        <label for="inputVille">Ville :</label>
        <input type="text" id="inputVille" th:field="*{lieuRetrait.ville}" />
      </li>
    </div>

    <li>
      <button type="submit">Enregistrer</button>
    </li>

    <a th:href="@{/accueil}">
      <button type="button">Annuler</button>
    </a>

    <a th:href="@{/annuler-vente(id=${article.id})}"
       onclick="return confirm('Êtes-vous sûr de vouloir annuler cette vente ?');">
      <button type="button">Annuler la vente</button>
    </a>

    <div th:if="${erreur}">
      <p th:text="${erreur}"></p>
    </div>

  </ul>
</form>

</body>
</html>
